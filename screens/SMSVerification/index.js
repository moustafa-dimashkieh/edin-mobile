import { Animated, SafeAreaView, Text, View, TouchableOpacity, ToastAndroid } from 'react-native';
import { StatusBar as ExpoStatusBar } from 'expo-status-bar';
import Svg, { Path } from "react-native-svg"
import React, { useState } from 'react';
import {
  CodeField,
  Cursor,
  useBlurOnFulfill,
  useClearByFocusCell,
} from 'react-native-confirmation-code-field';
import { useDispatch } from 'react-redux';
import AsyncStorage from '@react-native-async-storage/async-storage';

import { getAuth, PhoneAuthProvider, signInWithCredential } from 'firebase/auth';

import { resetUserInfo } from '../../redux/actions/userInfo';
import SMSHeader from '../../components/SMSHeader'
import BackButton from '../../components/BackButton';

import styles, {
  ACTIVE_CELL_BG_COLOR,
  CELL_BORDER_RADIUS,
  CELL_SIZE,
  DEFAULT_CELL_BG_COLOR,
  NOT_EMPTY_CELL_BG_COLOR,
} from './styles';

const { Value, Text: AnimatedText } = Animated;

const CELL_COUNT = 6;

const animationsColor = [...new Array(CELL_COUNT)].map(() => new Value(0));
const animationsScale = [...new Array(CELL_COUNT)].map(() => new Value(1));

const SMSVerification = ({ navigation, route }) => {
  const [value, setValue] = useState('');
  const ref = useBlurOnFulfill({ value, cellCount: CELL_COUNT });
  const [props, getCellOnLayoutHandler] = useClearByFocusCell({
    value,
    setValue,
  });

  const renderCell = ({ index, symbol, isFocused }) => {
    const hasValue = Boolean(symbol);
    const animatedCellStyle = {
      backgroundColor: hasValue
        ? animationsScale[index].interpolate({
          inputRange: [0, 1],
          outputRange: [NOT_EMPTY_CELL_BG_COLOR, ACTIVE_CELL_BG_COLOR],
        })
        : animationsColor[index].interpolate({
          inputRange: [0, 1],
          outputRange: [DEFAULT_CELL_BG_COLOR, ACTIVE_CELL_BG_COLOR],
        }),
      borderRadius: animationsScale[index].interpolate({
        inputRange: [0, 1],
        outputRange: [CELL_SIZE, CELL_BORDER_RADIUS],
      }),
      transform: [
        {
          scale: animationsScale[index].interpolate({
            inputRange: [0, 1],
            outputRange: [0.2, 1],
          }),
        },
      ],
    };

    return (
      <AnimatedText
        key={index}
        style={[styles.cell, animatedCellStyle]}
        onLayout={getCellOnLayoutHandler(index)}>
        {symbol || (isFocused ? <Cursor /> : null)}
      </AnimatedText>
    );
  };

  const iosTitle = (
    <Svg
      xmlns="http://www.w3.org/2000/svg"
      width={199}
      height={164}
      fill="none"
    >
      <Path
        fill="#000"
        d="M12.768 143.611c.324 0 .608-.042.852-.126.248-.084.454-.202.618-.354.168-.156.294-.34.378-.552.084-.216.126-.454.126-.714 0-.524-.164-.936-.492-1.236-.324-.3-.818-.45-1.482-.45h-1.332v3.432h1.332zm0-4.434c.552 0 1.032.064 1.44.192.408.128.746.31 1.014.546.268.232.466.514.594.846.132.332.198.7.198 1.104 0 .404-.07.776-.21 1.116a2.39 2.39 0 0 1-.618.87 2.859 2.859 0 0 1-1.02.57c-.404.132-.87.198-1.398.198h-1.332v3.174h-1.278v-8.616h2.61zm5.58-.24v8.856h-1.176v-8.856h1.176zm5.71 5.13c0-.232-.035-.446-.103-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.965 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09h-3.996c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm4.624-1.836a8.57 8.57 0 0 0-1.212.114 3.257 3.257 0 0 0-.81.228c-.208.096-.358.21-.45.342a.722.722 0 0 0-.138.432 1 1 0 0 0 .072.396c.052.108.12.198.204.27.088.068.19.118.306.15.116.032.242.048.378.048a2.083 2.083 0 0 0 .918-.204c.132-.068.258-.15.378-.246s.238-.206.354-.33v-1.2zm-3.432-2.538c.34-.324.708-.566 1.104-.726.4-.16.838-.24 1.314-.24.348 0 .656.058.924.174.268.112.494.27.678.474.184.204.322.448.414.732.096.284.144.598.144.942v3.888h-.522a.52.52 0 0 1-.264-.054.41.41 0 0 1-.144-.216l-.126-.534c-.156.144-.31.272-.462.384a3.21 3.21 0 0 1-.48.282c-.164.076-.34.134-.528.174-.188.04-.396.06-.624.06-.24 0-.466-.032-.678-.096a1.464 1.464 0 0 1-.918-.816 1.79 1.79 0 0 1-.132-.714c0-.24.064-.47.192-.69.132-.224.344-.424.636-.6.296-.176.68-.32 1.152-.432.476-.112 1.06-.176 1.752-.192v-.444c0-.46-.098-.804-.294-1.032-.196-.228-.484-.342-.864-.342-.256 0-.472.032-.648.096a2.482 2.482 0 0 0-.45.216c-.124.076-.234.146-.33.21a.497.497 0 0 1-.288.096.346.346 0 0 1-.21-.066.57.57 0 0 1-.138-.156l-.21-.378zm9.738.198a.362.362 0 0 1-.102.114.282.282 0 0 1-.138.03.458.458 0 0 1-.216-.066 3.59 3.59 0 0 0-.282-.144 2.597 2.597 0 0 0-.384-.144 1.865 1.865 0 0 0-.528-.066c-.168 0-.322.022-.462.066-.136.04-.252.098-.348.174a.74.74 0 0 0-.3.588c0 .152.044.278.132.378.092.1.21.186.354.258.148.072.314.138.498.198.188.056.378.116.57.18.196.064.386.138.57.222.188.08.354.182.498.306a1.321 1.321 0 0 1 .492 1.068c0 .284-.052.548-.156.792-.1.24-.25.448-.45.624-.196.176-.44.314-.732.414-.292.1-.626.15-1.002.15-.42 0-.808-.07-1.164-.21a2.916 2.916 0 0 1-.894-.534l.276-.45a.332.332 0 0 1 .312-.174c.076 0 .154.028.234.084.08.056.176.118.288.186.112.064.248.124.408.18.16.052.36.078.6.078.2 0 .374-.024.522-.072.148-.052.27-.12.366-.204a.838.838 0 0 0 .294-.654.576.576 0 0 0-.138-.396 1.09 1.09 0 0 0-.354-.276 2.748 2.748 0 0 0-.498-.198c-.188-.056-.38-.116-.576-.18a5.901 5.901 0 0 1-.576-.222 2.032 2.032 0 0 1-.504-.318 1.539 1.539 0 0 1-.354-.468 1.548 1.548 0 0 1-.132-.672c0-.236.048-.462.144-.678.1-.216.242-.406.426-.57.188-.164.418-.294.69-.39.276-.1.59-.15.942-.15.404 0 .768.064 1.092.192.328.128.608.304.84.528l-.258.426zm5.659 1.32c0-.232-.034-.446-.102-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.966 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09H38.39c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm9.969-.168-.006 1.038H47.2v-8.616h5.34v1.038h-4.056v2.73h3.264v1.002h-3.264v2.808h4.062zm2.285-4.212c.132-.14.27-.268.414-.384a2.528 2.528 0 0 1 .978-.486c.188-.048.388-.072.6-.072.336 0 .63.056.882.168.256.112.47.27.642.474.172.2.302.442.39.726.088.284.132.598.132.942v3.882h-1.176v-3.882c0-.436-.1-.774-.3-1.014-.2-.244-.506-.366-.918-.366-.3 0-.582.072-.846.216-.26.14-.502.332-.726.576v4.47h-1.17v-6.096h.702c.164 0 .266.078.306.234l.09.612zm7.443 5.346c-.492 0-.872-.138-1.14-.414-.264-.276-.396-.67-.396-1.182v-3.648h-.708a.263.263 0 0 1-.174-.06c-.044-.044-.066-.108-.066-.192v-.474l.99-.138.264-1.818a.275.275 0 0 1 .09-.156.272.272 0 0 1 .18-.06h.594v2.046h1.728v.852h-1.728v3.57c0 .24.058.42.174.54a.63.63 0 0 0 .456.174c.108 0 .2-.014.276-.042.08-.028.148-.058.204-.09.056-.036.104-.068.144-.096a.195.195 0 0 1 .108-.042c.04 0 .07.01.09.03a.26.26 0 0 1 .072.084l.348.564c-.192.176-.42.312-.684.408a2.387 2.387 0 0 1-.822.144zm6.442-3.822c0-.232-.034-.446-.102-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.966 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09h-3.996c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm2.452-4.056c.196-.4.432-.714.708-.942.276-.228.608-.342.996-.342.132 0 .256.016.372.048.12.028.224.072.312.132l-.078.882c-.028.108-.094.162-.198.162-.056 0-.14-.01-.252-.03a1.716 1.716 0 0 0-.36-.036c-.188 0-.354.028-.498.084a1.132 1.132 0 0 0-.39.24 1.598 1.598 0 0 0-.3.39c-.088.152-.17.326-.246.522v3.816h-1.17v-6.096h.672c.128 0 .214.024.258.072.048.044.082.124.102.24l.072.858zm7.976 5.022c-.492 0-.872-.138-1.14-.414-.264-.276-.396-.67-.396-1.182v-3.648h-.708a.263.263 0 0 1-.174-.06c-.044-.044-.066-.108-.066-.192v-.474l.99-.138.264-1.818a.275.275 0 0 1 .09-.156.272.272 0 0 1 .18-.06h.594v2.046h1.728v.852h-1.728v3.57c0 .24.058.42.174.54a.63.63 0 0 0 .456.174c.108 0 .2-.014.276-.042.08-.028.148-.058.204-.09.056-.036.104-.068.144-.096a.195.195 0 0 1 .108-.042c.04 0 .07.01.09.03a.26.26 0 0 1 .072.084l.348.564c-.192.176-.42.312-.684.408a2.387 2.387 0 0 1-.822.144zm3.61-5.418c.255-.26.537-.47.846-.63.312-.16.67-.24 1.074-.24.335 0 .63.056.881.168.256.112.47.27.642.474.172.2.302.442.39.726.088.284.132.598.132.942v3.882H86.51v-3.882c0-.436-.1-.774-.3-1.014-.2-.244-.505-.366-.917-.366-.3 0-.583.072-.847.216a2.77 2.77 0 0 0-.725.576v4.47h-1.17v-8.856h1.17v3.534zm9.582 1.596c0-.232-.034-.446-.102-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.966 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09h-3.996c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm7.233-3.312c.324 0 .608-.042.852-.126.248-.084.454-.202.618-.354.168-.156.294-.34.378-.552.084-.216.126-.454.126-.714 0-.524-.164-.936-.492-1.236-.324-.3-.818-.45-1.482-.45h-1.332v3.432h1.332zm0-4.434c.552 0 1.032.064 1.44.192.408.128.746.31 1.014.546.268.232.466.514.594.846.132.332.198.7.198 1.104 0 .404-.07.776-.21 1.116a2.39 2.39 0 0 1-.618.87 2.859 2.859 0 0 1-1.02.57c-.404.132-.87.198-1.398.198h-1.332v3.174h-1.278v-8.616h2.61zm5.94 8.616h-1.284v-8.616h1.284v8.616zm9.182-8.616v8.616h-.648a.534.534 0 0 1-.252-.054.761.761 0 0 1-.198-.174l-4.866-6.294c.008.108.014.214.018.318.008.104.012.202.012.294v5.91h-1.122v-8.616h.66c.112 0 .196.014.252.042a.516.516 0 0 1 .186.174l4.878 6.3a11.587 11.587 0 0 1-.03-.336 8.78 8.78 0 0 1-.006-.312v-5.868h1.116zm8.521 3.57a.362.362 0 0 1-.102.114.282.282 0 0 1-.138.03.458.458 0 0 1-.216-.066 3.59 3.59 0 0 0-.282-.144 2.597 2.597 0 0 0-.384-.144 1.865 1.865 0 0 0-.528-.066c-.168 0-.322.022-.462.066-.136.04-.252.098-.348.174a.74.74 0 0 0-.3.588c0 .152.044.278.132.378.092.1.21.186.354.258.148.072.314.138.498.198.188.056.378.116.57.18.196.064.386.138.57.222.188.08.354.182.498.306a1.321 1.321 0 0 1 .492 1.068c0 .284-.052.548-.156.792-.1.24-.25.448-.45.624-.196.176-.44.314-.732.414-.292.1-.626.15-1.002.15-.42 0-.808-.07-1.164-.21a2.916 2.916 0 0 1-.894-.534l.276-.45a.332.332 0 0 1 .312-.174c.076 0 .154.028.234.084.08.056.176.118.288.186.112.064.248.124.408.18.16.052.36.078.6.078.2 0 .374-.024.522-.072.148-.052.27-.12.366-.204a.838.838 0 0 0 .294-.654.576.576 0 0 0-.138-.396 1.09 1.09 0 0 0-.354-.276 2.748 2.748 0 0 0-.498-.198c-.188-.056-.38-.116-.576-.18a5.901 5.901 0 0 1-.576-.222 2.032 2.032 0 0 1-.504-.318 1.539 1.539 0 0 1-.354-.468 1.548 1.548 0 0 1-.132-.672c0-.236.048-.462.144-.678.1-.216.242-.406.426-.57.188-.164.418-.294.69-.39.276-.1.59-.15.942-.15.404 0 .768.064 1.092.192.328.128.608.304.84.528l-.258.426zm5.658 1.32c0-.232-.034-.446-.102-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.966 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09h-3.996c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm2.446-4.38c.132-.14.27-.268.414-.384a2.528 2.528 0 0 1 .978-.486c.188-.048.388-.072.6-.072.336 0 .63.056.882.168.256.112.47.27.642.474.172.2.302.442.39.726.088.284.132.598.132.942v3.882h-1.176v-3.882c0-.436-.1-.774-.3-1.014-.2-.244-.506-.366-.918-.366-.3 0-.582.072-.846.216-.26.14-.502.332-.726.576v4.47h-1.17v-6.096h.702c.164 0 .266.078.306.234l.09.612zm7.443 5.346c-.492 0-.872-.138-1.14-.414-.264-.276-.396-.67-.396-1.182v-3.648h-.708a.263.263 0 0 1-.174-.06c-.044-.044-.066-.108-.066-.192v-.474l.99-.138.264-1.818a.275.275 0 0 1 .09-.156.272.272 0 0 1 .18-.06h.594v2.046h1.728v.852h-1.728v3.57c0 .24.058.42.174.54a.63.63 0 0 0 .456.174c.108 0 .2-.014.276-.042.08-.028.148-.058.204-.09.056-.036.104-.068.144-.096a.195.195 0 0 1 .108-.042c.04 0 .07.01.09.03a.26.26 0 0 1 .072.084l.348.564c-.192.176-.42.312-.684.408a2.387 2.387 0 0 1-.822.144zm7.383 0c-.492 0-.872-.138-1.14-.414-.264-.276-.396-.67-.396-1.182v-3.648h-.708a.263.263 0 0 1-.174-.06c-.044-.044-.066-.108-.066-.192v-.474l.99-.138.264-1.818a.275.275 0 0 1 .09-.156.272.272 0 0 1 .18-.06h.594v2.046h1.728v.852h-1.728v3.57c0 .24.058.42.174.54a.63.63 0 0 0 .456.174c.108 0 .2-.014.276-.042.08-.028.148-.058.204-.09.056-.036.104-.068.144-.096a.195.195 0 0 1 .108-.042c.04 0 .07.01.09.03a.26.26 0 0 1 .072.084l.348.564c-.192.176-.42.312-.684.408a2.387 2.387 0 0 1-.822.144zm5.002-6.288c.448 0 .852.074 1.212.222.364.144.672.354.924.63.256.272.452.602.588.99.136.384.204.816.204 1.296 0 .48-.068.914-.204 1.302a2.75 2.75 0 0 1-.588.99c-.252.272-.56.482-.924.63-.36.144-.764.216-1.212.216-.452 0-.86-.072-1.224-.216a2.619 2.619 0 0 1-.924-.63 2.82 2.82 0 0 1-.594-.99 3.918 3.918 0 0 1-.204-1.302c0-.48.068-.912.204-1.296a2.82 2.82 0 0 1 .594-.99c.256-.276.564-.486.924-.63a3.223 3.223 0 0 1 1.224-.222zm0 5.364c.576 0 1.006-.194 1.29-.582.284-.388.426-.934.426-1.638 0-.704-.142-1.25-.426-1.638-.284-.392-.714-.588-1.29-.588-.584 0-1.02.196-1.308.588-.284.388-.426.934-.426 1.638 0 .704.142 1.25.426 1.638.288.388.724.582 1.308.582zm12.293-5.268-3.384 7.866a.494.494 0 0 1-.144.204c-.06.048-.148.072-.264.072h-.87l1.116-2.43-2.502-5.712h1.02c.1 0 .178.024.234.072a.418.418 0 0 1 .12.162l1.548 3.66c.032.092.062.186.09.282.032.092.058.184.078.276.028-.096.058-.19.09-.282.032-.096.066-.19.102-.282l1.494-3.654a.388.388 0 0 1 .132-.168.336.336 0 0 1 .204-.066h.936zm3.316-.096c.448 0 .852.074 1.212.222.364.144.672.354.924.63.256.272.452.602.588.99.136.384.204.816.204 1.296 0 .48-.068.914-.204 1.302a2.75 2.75 0 0 1-.588.99c-.252.272-.56.482-.924.63-.36.144-.764.216-1.212.216-.452 0-.86-.072-1.224-.216a2.619 2.619 0 0 1-.924-.63 2.82 2.82 0 0 1-.594-.99 3.918 3.918 0 0 1-.204-1.302c0-.48.068-.912.204-1.296a2.82 2.82 0 0 1 .594-.99c.256-.276.564-.486.924-.63a3.223 3.223 0 0 1 1.224-.222zm0 5.364c.576 0 1.006-.194 1.29-.582.284-.388.426-.934.426-1.638 0-.704-.142-1.25-.426-1.638-.284-.392-.714-.588-1.29-.588-.584 0-1.02.196-1.308.588-.284.388-.426.934-.426 1.638 0 .704.142 1.25.426 1.638.288.388.724.582 1.308.582zm9.304-5.268v6.096h-.702c-.16 0-.264-.078-.312-.234l-.084-.612a4.13 4.13 0 0 1-.414.384 2.688 2.688 0 0 1-.462.3c-.164.08-.338.142-.522.186a2.347 2.347 0 0 1-.594.072c-.336 0-.632-.056-.888-.168a1.779 1.779 0 0 1-.636-.468 2.071 2.071 0 0 1-.39-.732 3.172 3.172 0 0 1-.132-.942v-3.882h1.176v3.882c0 .436.1.776.3 1.02.2.24.506.36.918.36.3 0 .58-.07.84-.21.26-.144.504-.34.732-.588v-4.464h1.17zm2.738 1.17c.196-.4.432-.714.708-.942.276-.228.608-.342.996-.342.132 0 .256.016.372.048.12.028.224.072.312.132l-.078.882c-.028.108-.094.162-.198.162-.056 0-.14-.01-.252-.03a1.716 1.716 0 0 0-.36-.036c-.188 0-.354.028-.498.084a1.132 1.132 0 0 0-.39.24 1.598 1.598 0 0 0-.3.39c-.088.152-.17.326-.246.522v3.816h-1.17v-6.096h.672c.128 0 .214.024.258.072.048.044.082.124.102.24l.072.858zM56.731 156.543c.131-.14.27-.268.413-.384a2.528 2.528 0 0 1 .979-.486c.188-.048.388-.072.6-.072.336 0 .63.056.882.168.256.112.47.27.642.474.172.2.301.442.39.726.087.284.132.598.132.942v3.882h-1.176v-3.882c0-.436-.1-.774-.3-1.014-.2-.244-.507-.366-.919-.366-.3 0-.582.072-.846.216-.26.14-.502.332-.725.576v4.47h-1.17v-6.096h.701c.164 0 .266.078.306.234l.09.612zm10.686-.846v6.096h-.702c-.16 0-.264-.078-.312-.234l-.084-.612a4.13 4.13 0 0 1-.414.384 2.688 2.688 0 0 1-.462.3c-.164.08-.338.142-.522.186a2.347 2.347 0 0 1-.594.072c-.336 0-.632-.056-.888-.168a1.779 1.779 0 0 1-.636-.468 2.071 2.071 0 0 1-.39-.732 3.172 3.172 0 0 1-.132-.942v-3.882h1.176v3.882c0 .436.1.776.3 1.02.2.24.506.36.918.36.3 0 .58-.07.84-.21.26-.144.504-.34.732-.588v-4.464h1.17zm1.633 6.096v-6.096h.703c.163 0 .266.078.305.234l.084.582c.225-.268.473-.486.745-.654.275-.172.597-.258.966-.258.404 0 .732.112.984.336.251.22.435.52.551.9a1.9 1.9 0 0 1 .81-.942c.173-.1.355-.174.547-.222.195-.048.393-.072.593-.072.325 0 .613.052.865.156.255.1.471.248.647.444.177.196.31.438.403.726.091.288.138.616.138.984v3.882h-1.177v-3.882c0-.456-.1-.8-.3-1.032-.195-.232-.484-.348-.864-.348-.168 0-.328.03-.48.09a1.1 1.1 0 0 0-.401.258c-.112.116-.203.26-.27.432a1.717 1.717 0 0 0-.097.6v3.882h-1.176v-3.882c0-.472-.094-.82-.282-1.044-.188-.224-.463-.336-.828-.336-.252 0-.486.066-.702.198a2.27 2.27 0 0 0-.593.54v4.524h-1.17zm11.085-1.5c.192.252.4.428.624.528.224.1.468.15.732.15.544 0 .962-.194 1.254-.582.296-.388.444-.974.444-1.758 0-.724-.13-1.254-.39-1.59-.26-.34-.628-.51-1.104-.51-.336 0-.628.076-.876.228a2.59 2.59 0 0 0-.684.648v2.886zm0-3.756c.252-.28.538-.506.858-.678a2.27 2.27 0 0 1 1.092-.258c.356 0 .676.07.96.21.288.136.532.334.732.594.2.256.354.568.462.936.108.368.162.784.162 1.248 0 .492-.062.94-.186 1.344-.12.404-.294.75-.522 1.038a2.344 2.344 0 0 1-.822.672 2.485 2.485 0 0 1-1.092.234 2.278 2.278 0 0 1-.996-.222 1.887 1.887 0 0 1-.378-.264 2.805 2.805 0 0 1-.33-.354l-.054.51c-.032.164-.132.246-.3.246h-.756v-8.856h1.17v3.6zm9.606 1.53c0-.232-.034-.446-.102-.642a1.421 1.421 0 0 0-.288-.51 1.323 1.323 0 0 0-.468-.336 1.582 1.582 0 0 0-.636-.12c-.492 0-.88.142-1.164.426-.28.284-.458.678-.534 1.182h3.192zm.966 2.856c-.144.168-.31.314-.498.438-.188.12-.388.218-.6.294a3.628 3.628 0 0 1-.66.168 4.192 4.192 0 0 1-.666.054 3.2 3.2 0 0 1-1.17-.21 2.683 2.683 0 0 1-.93-.624 2.94 2.94 0 0 1-.612-1.02 4.208 4.208 0 0 1-.216-1.404c0-.424.066-.818.198-1.182.132-.368.32-.688.564-.96.248-.272.55-.486.906-.642a2.96 2.96 0 0 1 1.2-.234c.372 0 .714.062 1.026.186.316.12.588.296.816.528.228.232.406.518.534.858.132.34.198.728.198 1.164 0 .18-.02.302-.06.366-.04.06-.114.09-.222.09h-3.996c.012.364.064.682.156.954.092.268.218.492.378.672.164.18.358.314.582.402.224.088.474.132.75.132.26 0 .484-.03.672-.09a3.332 3.332 0 0 0 .84-.39c.096-.06.18-.09.252-.09.096 0 .17.036.222.108l.336.432zm2.451-4.056c.196-.4.432-.714.708-.942.276-.228.608-.342.996-.342.132 0 .256.016.372.048.12.028.224.072.312.132l-.078.882c-.028.108-.094.162-.198.162-.056 0-.14-.01-.252-.03a1.716 1.716 0 0 0-.36-.036c-.188 0-.354.028-.498.084a1.132 1.132 0 0 0-.39.24 1.598 1.598 0 0 0-.3.39c-.088.152-.17.326-.246.522v3.816h-1.17v-6.096h.672c.128 0 .214.024.258.072.048.044.082.124.102.24l.072.858zm7.238 3.426c.192.252.4.428.624.528.224.1.468.15.732.15.544 0 .962-.194 1.254-.582.296-.388.444-.974.444-1.758 0-.724-.13-1.254-.39-1.59-.26-.34-.628-.51-1.104-.51-.336 0-.628.076-.876.228a2.59 2.59 0 0 0-.684.648v2.886zm0-3.756c.252-.28.538-.506.858-.678a2.27 2.27 0 0 1 1.092-.258c.356 0 .676.07.96.21.288.136.532.334.732.594.2.256.354.568.462.936.108.368.162.784.162 1.248 0 .492-.062.94-.186 1.344-.12.404-.294.75-.522 1.038a2.344 2.344 0 0 1-.822.672 2.485 2.485 0 0 1-1.092.234 2.278 2.278 0 0 1-.996-.222 1.887 1.887 0 0 1-.378-.264 2.805 2.805 0 0 1-.33-.354l-.054.51c-.032.164-.132.246-.3.246h-.756v-8.856h1.17v3.6zm10.733-.84-3.384 7.866a.494.494 0 0 1-.144.204c-.06.048-.148.072-.264.072h-.87l1.116-2.43-2.502-5.712h1.02c.1 0 .178.024.234.072a.418.418 0 0 1 .12.162l1.548 3.66c.032.092.062.186.09.282.032.092.058.184.078.276.028-.096.058-.19.09-.282.032-.096.066-.19.102-.282l1.494-3.654a.388.388 0 0 1 .132-.168.336.336 0 0 1 .204-.066h.936zm8.334-1.116a.488.488 0 0 1-.126.15.278.278 0 0 1-.168.048.448.448 0 0 1-.246-.096 3.595 3.595 0 0 0-.348-.222 2.353 2.353 0 0 0-.492-.222 2.074 2.074 0 0 0-.69-.102c-.252 0-.474.034-.666.102a1.337 1.337 0 0 0-.474.27 1.125 1.125 0 0 0-.294.402 1.27 1.27 0 0 0-.096.498c0 .232.058.424.174.576.12.152.276.282.468.39.192.108.41.202.654.282.244.08.494.164.75.252.256.084.506.182.75.294.244.112.462.254.654.426.192.168.346.376.462.624.12.244.18.544.18.9 0 .38-.066.736-.198 1.068a2.475 2.475 0 0 1-.564.87 2.665 2.665 0 0 1-.918.588c-.36.14-.77.21-1.23.21-.276 0-.544-.028-.804-.084a3.952 3.952 0 0 1-.738-.222c-.232-.1-.45-.218-.654-.354-.2-.14-.38-.296-.54-.468l.366-.612a.512.512 0 0 1 .126-.12.325.325 0 0 1 .174-.048c.084 0 .18.044.288.132.112.088.248.186.408.294.164.104.358.2.582.288.228.088.504.132.828.132.264 0 .5-.034.708-.102.208-.072.382-.172.522-.3.144-.132.254-.29.33-.474.076-.184.114-.388.114-.612 0-.252-.058-.458-.174-.618a1.418 1.418 0 0 0-.462-.402c-.192-.108-.41-.2-.654-.276l-.75-.234a8.06 8.06 0 0 1-.75-.288 2.472 2.472 0 0 1-.654-.42 1.953 1.953 0 0 1-.462-.654c-.116-.264-.174-.588-.174-.972a2.303 2.303 0 0 1 .702-1.656c.232-.224.516-.402.852-.534a3.05 3.05 0 0 1 1.152-.204c.484 0 .928.078 1.332.234.408.152.762.372 1.062.66l-.312.606zm11.13-1.404v8.616h-1.116v-6.132c0-.092.002-.19.006-.294l.024-.318-2.868 5.262c-.1.196-.254.294-.462.294h-.18a.477.477 0 0 1-.456-.294l-2.922-5.28c.024.224.036.434.036.63v6.132h-1.122v-8.616h.948c.112 0 .198.012.258.036.064.02.124.08.18.18l2.88 5.16c.056.104.108.214.156.33.048.116.094.232.138.348.084-.236.182-.464.294-.684l2.826-5.154c.052-.1.108-.16.168-.18a.776.776 0 0 1 .264-.036h.948zm6.589 1.404a.488.488 0 0 1-.126.15.278.278 0 0 1-.168.048.448.448 0 0 1-.246-.096 3.595 3.595 0 0 0-.348-.222 2.353 2.353 0 0 0-.492-.222 2.074 2.074 0 0 0-.69-.102c-.252 0-.474.034-.666.102a1.337 1.337 0 0 0-.474.27 1.125 1.125 0 0 0-.294.402 1.27 1.27 0 0 0-.096.498c0 .232.058.424.174.576.12.152.276.282.468.39.192.108.41.202.654.282.244.08.494.164.75.252.256.084.506.182.75.294.244.112.462.254.654.426.192.168.346.376.462.624.12.244.18.544.18.9 0 .38-.066.736-.198 1.068a2.475 2.475 0 0 1-.564.87 2.665 2.665 0 0 1-.918.588c-.36.14-.77.21-1.23.21-.276 0-.544-.028-.804-.084a3.952 3.952 0 0 1-.738-.222c-.232-.1-.45-.218-.654-.354-.2-.14-.38-.296-.54-.468l.366-.612a.512.512 0 0 1 .126-.12.325.325 0 0 1 .174-.048c.084 0 .18.044.288.132.112.088.248.186.408.294.164.104.358.2.582.288.228.088.504.132.828.132.264 0 .5-.034.708-.102.208-.072.382-.172.522-.3.144-.132.254-.29.33-.474.076-.184.114-.388.114-.612 0-.252-.058-.458-.174-.618a1.418 1.418 0 0 0-.462-.402c-.192-.108-.41-.2-.654-.276l-.75-.234a8.06 8.06 0 0 1-.75-.288 2.472 2.472 0 0 1-.654-.42 1.953 1.953 0 0 1-.462-.654c-.116-.264-.174-.588-.174-.972a2.303 2.303 0 0 1 .702-1.656c.232-.224.516-.402.852-.534a3.05 3.05 0 0 1 1.152-.204c.484 0 .928.078 1.332.234.408.152.762.372 1.062.66l-.312.606z"
      />
      <Path
        fill="#393B40"
        d="m27.064 87.567-10.512 26.226h-5.508L.532 87.567h4.896c.528 0 .954.126 1.278.378.324.24.57.552.738.936l5.076 14.04c.24.612.474 1.284.702 2.016.228.72.444 1.476.648 2.268.168-.792.354-1.548.558-2.268.216-.732.444-1.404.684-2.016l5.04-14.04c.132-.336.366-.636.702-.9.348-.276.774-.414 1.278-.414h4.932zm10.006 14.652c0-.444-.06-.876-.18-1.296a2.88 2.88 0 0 0-.558-1.116 2.715 2.715 0 0 0-1.008-.81c-.42-.204-.93-.306-1.53-.306-1.056 0-1.884.306-2.484.918-.6.6-.996 1.47-1.188 2.61h6.948zm-7.02 3.24c.18 1.56.654 2.694 1.422 3.402.768.696 1.758 1.044 2.97 1.044.648 0 1.206-.078 1.674-.234a8.06 8.06 0 0 0 1.242-.522l1.008-.522c.312-.156.636-.234.972-.234.444 0 .78.162 1.008.486l1.62 1.998c-.576.66-1.2 1.2-1.872 1.62a10 10 0 0 1-2.052.972c-.696.228-1.398.384-2.106.468-.696.096-1.362.144-1.998.144a10.69 10.69 0 0 1-3.69-.63 8.674 8.674 0 0 1-3.006-1.908c-.852-.84-1.53-1.884-2.034-3.132-.492-1.248-.738-2.7-.738-4.356 0-1.248.21-2.43.63-3.546a8.925 8.925 0 0 1 1.836-2.934 8.866 8.866 0 0 1 2.898-1.998c1.14-.492 2.424-.738 3.852-.738 1.236 0 2.364.192 3.384.576a7.274 7.274 0 0 1 2.646 1.674c.744.732 1.32 1.632 1.728 2.7.42 1.056.63 2.256.63 3.6 0 .42-.018.762-.054 1.026-.036.264-.102.474-.198.63a.75.75 0 0 1-.396.324c-.156.06-.36.09-.612.09H30.05zm20.037-7.452c.576-1.008 1.236-1.8 1.98-2.376a4.163 4.163 0 0 1 2.592-.864c.84 0 1.524.198 2.052.594l-.36 4.104c-.06.264-.162.444-.306.54-.132.096-.318.144-.558.144-.096 0-.222-.006-.378-.018a89.273 89.273 0 0 0-.486-.036 6.97 6.97 0 0 0-.522-.054 3.323 3.323 0 0 0-.468-.036c-.816 0-1.47.216-1.962.648-.48.432-.888 1.032-1.224 1.8v11.34h-5.58V95.127h3.312c.276 0 .504.024.684.072.192.048.348.126.468.234a.813.813 0 0 1 .288.396c.072.168.132.372.18.612l.288 1.566zm14.232-2.88v18.666h-5.58V95.127h5.58zm.576-5.112c0 .444-.09.864-.27 1.26-.18.384-.426.726-.738 1.026a3.822 3.822 0 0 1-1.098.702 3.417 3.417 0 0 1-1.314.252c-.456 0-.882-.084-1.278-.252a3.985 3.985 0 0 1-1.062-.702c-.3-.3-.54-.642-.72-1.026a3.193 3.193 0 0 1-.252-1.26c0-.456.084-.882.252-1.278.18-.396.42-.744.72-1.044.312-.3.666-.534 1.062-.702a3.238 3.238 0 0 1 1.278-.252c.468 0 .906.084 1.314.252a3.374 3.374 0 0 1 1.836 1.746c.18.396.27.822.27 1.278zm4.701 23.778V98.961l-1.224-.252c-.42-.096-.762-.246-1.026-.45-.252-.204-.378-.504-.378-.9v-2.196h2.628v-.27c0-1.128.192-2.19.576-3.186a6.807 6.807 0 0 1 1.818-2.61c.816-.744 1.854-1.332 3.114-1.764 1.272-.432 2.784-.648 4.536-.648.54 0 1.098.03 1.674.09a9.107 9.107 0 0 1 1.494.234l-.18 2.826c-.024.3-.174.498-.45.594-.276.096-.57.144-.882.144-1.248 0-2.28.096-3.096.288-.816.192-1.464.48-1.944.864a2.99 2.99 0 0 0-.99 1.404c-.18.564-.27 1.212-.27 1.944v.09H86.84v18.63h-5.58V98.979h-6.084v14.814h-5.58zm34.901-14.238c-.168.204-.33.366-.486.486-.156.12-.378.18-.666.18-.276 0-.528-.066-.756-.198a24.844 24.844 0 0 0-.738-.432 5.24 5.24 0 0 0-.972-.45c-.372-.132-.834-.198-1.386-.198-.684 0-1.278.126-1.782.378-.492.252-.9.612-1.224 1.08-.324.468-.564 1.044-.72 1.728-.156.672-.234 1.434-.234 2.286 0 1.788.342 3.162 1.026 4.122.696.96 1.65 1.44 2.862 1.44.648 0 1.158-.078 1.53-.234.384-.168.708-.348.972-.54l.72-.558c.228-.168.51-.252.846-.252.444 0 .78.162 1.008.486l1.62 1.998a9.051 9.051 0 0 1-1.818 1.62 9.626 9.626 0 0 1-1.962.972 9.846 9.846 0 0 1-1.998.468 13.88 13.88 0 0 1-1.962.144 8.485 8.485 0 0 1-3.276-.648 8.182 8.182 0 0 1-2.736-1.872c-.78-.828-1.404-1.842-1.872-3.042-.456-1.2-.684-2.568-.684-4.104 0-1.344.198-2.598.594-3.762.408-1.176 1.002-2.19 1.782-3.042.792-.864 1.764-1.542 2.916-2.034 1.164-.492 2.508-.738 4.032-.738 1.464 0 2.748.234 3.852.702a9.243 9.243 0 0 1 2.988 2.052l-1.476 1.962zm13.421 6.642c-1.116.048-2.034.144-2.754.288-.72.144-1.29.324-1.71.54-.42.216-.714.462-.882.738a1.798 1.798 0 0 0-.234.9c0 .636.174 1.086.522 1.35.348.252.858.378 1.53.378.72 0 1.35-.126 1.89-.378.54-.252 1.086-.66 1.638-1.224v-2.592zm-10.044-8.478a11.241 11.241 0 0 1 3.744-2.214c1.38-.492 2.856-.738 4.428-.738 1.128 0 2.142.186 3.042.558.912.36 1.68.87 2.304 1.53a6.528 6.528 0 0 1 1.458 2.322c.336.9.504 1.884.504 2.952v11.664h-2.556c-.528 0-.93-.072-1.206-.216-.264-.144-.486-.444-.666-.9l-.396-1.026c-.468.396-.918.744-1.35 1.044-.432.3-.882.558-1.35.774a6.406 6.406 0 0 1-1.476.45 8.46 8.46 0 0 1-1.728.162c-.852 0-1.626-.108-2.322-.324a5.041 5.041 0 0 1-1.782-.99 4.378 4.378 0 0 1-1.116-1.602c-.264-.648-.396-1.392-.396-2.232 0-.672.168-1.35.504-2.034.336-.696.918-1.326 1.746-1.89.828-.576 1.944-1.056 3.348-1.44 1.404-.384 3.174-.6 5.31-.648v-.792c0-1.092-.228-1.878-.684-2.358-.444-.492-1.08-.738-1.908-.738-.66 0-1.2.072-1.62.216-.42.144-.798.306-1.134.486-.324.18-.642.342-.954.486-.312.144-.684.216-1.116.216-.384 0-.708-.096-.972-.288a2.508 2.508 0 0 1-.648-.684l-1.008-1.746zm38.944 16.074h-5.58V98.979h-7.812v9.27c0 .432.102.792.306 1.08.216.276.522.414.918.414.204 0 .372-.018.504-.054.144-.048.264-.096.36-.144.108-.06.204-.108.288-.144a.714.714 0 0 1 .324-.072c.168 0 .3.042.396.126.108.072.216.192.324.36l1.692 2.646c-.72.54-1.53.948-2.43 1.224a9.86 9.86 0 0 1-2.79.396c-.888 0-1.674-.126-2.358-.378a4.934 4.934 0 0 1-1.71-1.098 4.833 4.833 0 0 1-1.044-1.728c-.24-.672-.36-1.422-.36-2.25v-9.648h-1.584c-.288 0-.534-.09-.738-.27-.204-.192-.306-.468-.306-.828v-2.178l2.97-.594 1.098-4.536c.144-.576.552-.864 1.224-.864h2.916v5.454h13.392v18.63zm.774-23.796c0 .444-.09.864-.27 1.26a3.37 3.37 0 0 1-.738 1.044 3.538 3.538 0 0 1-1.098.684 3.417 3.417 0 0 1-1.314.252c-.456 0-.882-.084-1.278-.252a3.661 3.661 0 0 1-1.062-.684c-.3-.3-.54-.648-.72-1.044a3.193 3.193 0 0 1-.252-1.26c0-.444.084-.864.252-1.26.18-.408.42-.756.72-1.044.312-.3.666-.534 1.062-.702.396-.18.822-.27 1.278-.27.468 0 .906.09 1.314.27.42.168.786.402 1.098.702.312.288.558.636.738 1.044.18.396.27.816.27 1.26zm11.734 4.842c1.416 0 2.706.222 3.87.666 1.164.444 2.16 1.08 2.988 1.908.84.828 1.488 1.836 1.944 3.024.468 1.176.702 2.502.702 3.978 0 1.488-.234 2.832-.702 4.032-.456 1.188-1.104 2.202-1.944 3.042-.828.828-1.824 1.47-2.988 1.926-1.164.444-2.454.666-3.87.666-1.428 0-2.73-.222-3.906-.666a8.99 8.99 0 0 1-3.024-1.926c-.84-.84-1.494-1.854-1.962-3.042-.456-1.2-.684-2.544-.684-4.032 0-1.476.228-2.802.684-3.978.468-1.188 1.122-2.196 1.962-3.024a8.766 8.766 0 0 1 3.024-1.908c1.176-.444 2.478-.666 3.906-.666zm0 15.102c1.284 0 2.226-.45 2.826-1.35.612-.912.918-2.292.918-4.14 0-1.848-.306-3.222-.918-4.122-.6-.9-1.542-1.35-2.826-1.35-1.32 0-2.286.45-2.898 1.35-.612.9-.918 2.274-.918 4.122 0 1.848.306 3.228.918 4.14.612.9 1.578 1.35 2.898 1.35zm17.462-12.798c.36-.336.732-.648 1.116-.936a6.297 6.297 0 0 1 1.224-.72c.444-.204.918-.36 1.422-.468a7.382 7.382 0 0 1 1.674-.18c1.02 0 1.92.18 2.7.54.792.348 1.458.84 1.998 1.476.54.624.948 1.374 1.224 2.25.276.864.414 1.806.414 2.826v11.862h-5.58v-11.862c0-.912-.21-1.62-.63-2.124-.42-.516-1.038-.774-1.854-.774-.612 0-1.188.132-1.728.396-.528.252-1.044.6-1.548 1.044v13.32h-5.58V95.127h3.456c.696 0 1.152.312 1.368.936l.324 1.08z"
      />
      <Path
        fill="#E75455"
        d="m117.289 24.397.391-.392c5.484-5.484 5.484-14.407 0-19.892-5.484-5.484-14.408-5.484-19.892 0l-.391.391-.391-.39c-5.485-5.485-14.408-5.485-19.893 0-5.484 5.484-5.484 14.407 0 19.89l.392.393-.391.39c-5.485 5.485-5.485 14.407 0 19.893 5.484 5.484 14.408 5.484 19.892 0l.39-.392.392.392c5.484 5.484 14.408 5.484 19.892 0 5.484-5.486 5.484-14.408 0-19.892l-.391-.391zM99.519 5.845c4.53-4.529 11.899-4.529 16.428 0 4.529 4.53 4.529 11.9 0 16.428L102.761 35.46c-1.01 1.01-1.256 2.208-.06 3.419l.451.436a6.486 6.486 0 0 0 9.163 0 6.487 6.487 0 0 0 .001-9.163l-.392-.392.95-.949.391.392c3.051 3.05 3.051 8.013 0 11.062-3.049 3.05-8.013 3.05-11.063 0 0 0-.192-.161-.451-.423-.239-.242-2.615-2.656.06-5.332l13.186-13.186c4.006-4.006 4.006-10.523 0-14.529-4.005-4.005-10.522-4.005-14.527 0l-.392.392-.95-.95.392-.392zm11.064 31.739a4.037 4.037 0 0 1-5.7 0l-.391-.392 5.7-5.7.391.391a4.037 4.037 0 0 1 0 5.7zM78.845 5.845c4.53-4.529 11.9-4.529 16.428 0l13.186 13.186-.95.95L94.323 6.796c-4.006-4.005-10.522-4.005-14.527 0-4.006 4.006-4.006 10.523 0 14.528l.39.392-.95.95-.39-.391c-4.53-4.53-4.53-11.899 0-16.429zm25.648 5.755.391-.391a4.036 4.036 0 0 1 5.7 0 4.038 4.038 0 0 1 0 5.7l-.392.39-5.699-5.699zM83.734 28.894l-1.257 1.257a6.487 6.487 0 0 0 0 9.164 6.487 6.487 0 0 0 9.164 0l.391-.392c1.93-1.93-.393-3.851-1.511-4.97l-.728-.734-3.46-3.46.95-.949 4.602 4.603.363.364c3.384 3.382.996 5.833.734 6.096l-.392.391c-3.05 3.051-8.013 3.05-11.063 0-3.05-3.05-3.05-8.013 0-11.063l13.188-13.186.949.95-6.566 6.565-5.364 5.364zm.866 2.6 5.7 5.697-.392.392a4.035 4.035 0 0 1-5.699 0 4.035 4.035 0 0 1 0-5.7l.391-.39zm12.796-12.797 5.699 5.7-5.699 5.698-5.7-5.698 5.7-5.7zm-5.755-9.22a6.486 6.486 0 0 0-9.163 0 6.486 6.486 0 0 0 0 9.164l.39.392-.95.949-.39-.391c-3.05-3.05-3.05-8.013 0-11.064 3.05-3.05 8.013-3.05 11.063 0l13.187 13.187-.95.95L91.641 9.477zM90.3 11.602 84.6 17.3l-.39-.391a4.035 4.035 0 0 1-.001-5.7 4.034 4.034 0 0 1 5.7.001l.39.39zm25.647 31.346c-4.529 4.53-11.898 4.53-16.427 0l-.493-.44c-.108-.108-1.016-1.01-1.685-2.404a9.633 9.633 0 0 1-1.677 2.453l-.392.391c-4.529 4.53-11.898 4.53-16.428 0-4.529-4.529-4.529-11.898 0-16.428l13.187-13.186.95.95L79.796 27.47c-4.006 4.005-4.006 10.522 0 14.527 4.005 4.006 10.522 4.006 14.527 0l.413-.413c1.04-1.08 1.825-2.745 1.883-4.461 0-.05.003-.1.005-.15.011-1.341-.428-2.7-1.551-3.825l-2.093-2.093-.2-.214-3.764-3.763.95-.95 5.254 5.255.441.449c.78.78 1.333 1.556 1.714 2.314.382-.73.924-1.48 1.682-2.238l.072-.08 13.187-13.186a6.489 6.489 0 0 0 0-9.165 6.486 6.486 0 0 0-9.163 0l-.392.392-.949-.95.391-.392c3.049-3.05 8.013-3.05 11.063 0 3.05 3.051 3.05 8.014 0 11.063l-13.189 13.188-.415.417c-2.64 2.64-1.603 6.419.327 8.348l.48.454c4.006 4.006 10.522 4.006 14.528 0 4.006-4.005 4.006-10.522 0-14.527l-.392-.392.95-.95.392.392c4.529 4.529 4.529 11.898 0 16.427z"
      />
    </Svg>
  )

  const auth = getAuth();
  const dispatch = useDispatch();
  const { verificationId } = route.params;


  const handlePhoneVerification = async () => {
    try {
      const credential = PhoneAuthProvider.credential(
        verificationId,
        value
      );
      await signInWithCredential(auth, credential);
      ToastAndroid.show('Phone authentication successful', ToastAndroid.SHORT)
      navigation.navigate('Choice')
    } catch (err) {
      console.log(err.message)
      ToastAndroid.show(`Error: ${err.message}`, ToastAndroid.SHORT)
    }
  }

  return (
    <SafeAreaView>

      {Platform.OS === "android" ?
        <View style={styles.androidSmsHeader}>
          <SMSHeader />
        </View> :
        <View style={styles.iosSmsHeader}>
          {iosTitle}
        </View>}


      <View style={styles.backButton}>
        <TouchableOpacity onPress={() => { dispatch(resetUserInfo()); navigation.goBack() }}>
          <BackButton color={Platform.OS === "android" ? "#fff" : "#393B40"} />
        </TouchableOpacity>
      </View>


      <View style={styles.resendContainer}>
        <Text style={styles.resendPhrase}>
          Didn’t get a PIN? {''}
        </Text>
        <TouchableOpacity>
          <Text style={styles.resendWord}>
            Resend
          </Text>
        </TouchableOpacity>
      </View>

      <CodeField
        ref={ref}
        autoFocus
        value={value}
        onChangeText={setValue}
        cellCount={CELL_COUNT}
        rootStyle={styles.codeFiledRoot}
        keyboardType="number-pad"
        textContentType="oneTimeCode"
        renderCell={renderCell}
      />
      <View style={styles.buttonContainer}>
        <TouchableOpacity
          style={styles.continueButton}
          onPress={() => handlePhoneVerification()}>
          <Text style={styles.continueButtonText}>Verify</Text>
        </TouchableOpacity>
      </View>
      <ExpoStatusBar style="auto" />
    </SafeAreaView>

  );
};

export default SMSVerification;
